{"code":"import { Dictionary } from \"./enmu\";\r\nexport class Storage {\r\n    get(key) {\r\n        const value = localStorage.getItem(key);\r\n        const data = JSON.parse(value);\r\n        if (value) {\r\n            // 存了key，拿取key\r\n            const now = new Date().getTime();\r\n            if (typeof value[Dictionary.expire] === 'number' && value[Dictionary.expire] < now) {\r\n                // 已过期\r\n                // 删除key\r\n                return {\r\n                    message: `${key}已过期`,\r\n                    value: null\r\n                };\r\n            }\r\n            else {\r\n                // 未过期\r\n                return {\r\n                    message: '读取成功',\r\n                    value: data.value\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            // 未存key\r\n            console.warn('key值无效');\r\n            return {\r\n                message: `${key}无效`,\r\n                value: null\r\n            };\r\n        }\r\n    }\r\n    set(key, value, expire = Dictionary.permanent) {\r\n        const data = JSON.stringify({\r\n            value,\r\n            [Dictionary.expire]: expire\r\n        });\r\n        localStorage.setItem(key, data);\r\n    }\r\n    remove(key) {\r\n        if (localStorage.getItem(key)) {\r\n            localStorage.removeItem(key);\r\n        }\r\n    }\r\n    clear() {\r\n        localStorage.clear();\r\n    }\r\n}\r\n//# sourceMappingURL=index.js.map","references":["E:/Front_Web/github/ts-learn/rollupTs/src/type/index.ts","E:/Front_Web/github/ts-learn/rollupTs/src/enmu/index.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/index.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,UAAU,EAAE,MAAM,QAAQ,CAAC;AACpC,MAAM,OAAO,OAAO;IAChB,GAAG,CAAM,GAAO;QACZ,MAAM,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;QACvC,MAAM,IAAI,GAAW,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;QACtC,IAAG,KAAK,EAAC;YACL,cAAc;YACd,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAA;YAChC,IAAG,OAAO,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,QAAQ,IAAI,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,GAAG,EAAE;gBAC/E,MAAM;gBACN,QAAQ;gBACR,OAAO;oBACH,OAAO,EAAC,GAAG,GAAG,KAAK;oBACnB,KAAK,EAAC,IAAI;iBACb,CAAA;aACJ;iBAAM;gBACH,MAAM;gBACN,OAAO;oBACH,OAAO,EAAC,MAAM;oBACd,KAAK,EAAC,IAAI,CAAC,KAAK;iBACnB,CAAA;aACJ;SACJ;aAAM;YACH,QAAQ;YACR,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACvB,OAAO;gBACH,OAAO,EAAC,GAAG,GAAG,IAAI;gBAClB,KAAK,EAAC,IAAI;aACb,CAAA;SACJ;IACL,CAAC;IACD,GAAG,CAAI,GAAO,EAAC,KAAO,EAAC,SAAgB,UAAU,CAAC,SAAS;QACvD,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;YACxB,KAAK;YACL,CAAC,UAAU,CAAC,MAAM,CAAC,EAAC,MAAM;SAC7B,CAAC,CAAA;QACF,YAAY,CAAC,OAAO,CAAC,GAAG,EAAC,IAAI,CAAC,CAAA;IAClC,CAAC;IACD,MAAM,CAAC,GAAO;QACV,IAAG,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,EAAC;YACzB,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC,CAAA;SAC/B;IACL,CAAC;IACD,KAAK;QACD,YAAY,CAAC,KAAK,EAAE,CAAA;IACxB,CAAC;CACJ\"}"}
